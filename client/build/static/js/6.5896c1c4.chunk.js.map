{"version":3,"sources":["components/Timer.js","hooks/OnlineRoom.hook.js","pages/AdminPanel.js"],"names":["Timer","props","seconds","parseInt","hours","Math","floor","minutes","socket","openSocket","connect","process","reconnection","useOnlineRoom","initialState","token","useContext","Context","request","useHttp","useState","isActive","setIsActive","time","setTime","online_room","setOnline_room","email","JSON","parse","localStorage","getItem","userEmail","useEffect","emit","on","data","length","online","index","operator","fetchLinks","useCallback","a","async","Authorization","fetched","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","isCancelled","handleOnlineRoom","off","AdminPanel","isActive1","isActive2","isActive3","isActive4","isActive5","time1","time2","time3","time4","time5","className","style","to"],"mappings":"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","file":"static/js/6.5896c1c4.chunk.js","sourcesContent":["// import \"./Timer.css\";\nexport default function Timer(props) {\n\n\tif (!props.props) {\n\t\treturn `0h:0m:0s`\n\t}\n\n\tvar seconds = parseInt(props.props, 10); // don't forget the second param\n    var hours   = Math.floor(seconds / 3600);\n    var minutes = Math.floor((seconds - (hours * 3600)) / 60);\n    seconds = seconds - (hours * 3600) - (minutes * 60);\n\n    if (hours   < 10) {hours   = \"0\"+hours;}\n    if (minutes < 10) {minutes = \"0\"+minutes;}\n    if (seconds < 10) {seconds = \"0\"+seconds;}\n\treturn `${hours}h:${minutes}m:${seconds}s`\n}\n","import { useState, useEffect, useContext, useCallback } from 'react';\nimport openSocket from 'socket.io-client';\nimport { toast } from 'react-toastify'\nimport { Context } from '../context/Context'\nimport { useHttp } from './http.hook';\n\n// const socket = openSocket.connect('http://localhost:5000/', { reconnection: false });\nconst socket = openSocket.connect(process.env.REACT_APP_API_URL, { reconnection: false })\nconst useOnlineRoom = (initialState) => {\n  const auth = useContext(Context);\n  const { token } = auth;\n  const { request } = useHttp();\n\n  const [isActive, setIsActive] = useState(\"не в сети\");\n  const [time, setTime] = useState(false);\n  const [online_room, setOnline_room] = useState([]);\n\n  const data = JSON.parse(localStorage.getItem('userData'));\n  const email = data.userEmail;\n\n  useEffect(() => {\n    let isCancelled = false;\n    socket.emit('createRoom', email);\n    socket.on('online_room', (data) => {\n      setOnline_room(data);\n    })\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (online_room.length == 0) {\n      setIsActive(\"не в сети\");\n    } else {\n      let online = online_room\n      for (let index = 0; index < online.length; index++) {\n        const element = online[index];\n        if (element.operator === `room${initialState}`) {\n          setIsActive(\"online\");\n        }\n      }\n    }\n  }, [online_room]);\n\n  const fetchLinks = useCallback(async () => {\n    try {\n      const fetched = await request(`/api/time/${initialState}`, 'GET', null, {\n        Authorization: `Bearer ${token}`\n      });\n      setTime(fetched);\n    } catch (e) {\n      toast.error(`${e}`, {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n    }\n  }, [initialState, request, token]);\n\n  useEffect(() => {\n    if (initialState) {\n      fetchLinks();\n    }\n  }, [fetchLinks, initialState]);\n  useEffect(() => {\n    let isCancelled = false;\n\n    const handleOnlineRoom = (data) => {\n      if (!isCancelled) {\n        setOnline_room(data);\n      }\n    };\n\n    socket.on('online_room', handleOnlineRoom);\n\n    return () => {\n      isCancelled = true;\n      socket.off('online_room', handleOnlineRoom);\n    };\n  }, []);\n  return {\n    isActive,\n    time,\n    online_room,\n    setOnline_room\n  };\n};\n\nexport default useOnlineRoom;\n","import React from 'react';\nimport Timer from '../components/Timer.js';\nimport useOnlineRoom from '../hooks/OnlineRoom.hook.js';\nimport {Link} from 'react-router-dom';\n\n const AdminPanel = () => {\n   const isActive1 = useOnlineRoom(1).isActive;\n\n   const isActive2 = useOnlineRoom(2).isActive;\n   const isActive3 = useOnlineRoom(3).isActive;\n   const isActive4 = useOnlineRoom(4).isActive;\n   const isActive5 = useOnlineRoom(5).isActive;\n   const time1 = useOnlineRoom(1).time;\n   const time2 = useOnlineRoom(2).time;\n   const time3 = useOnlineRoom(3).time;\n   const time4 = useOnlineRoom(4).time;\n   const time5 = useOnlineRoom(5).time;\n    return(\n    <div className=\"container mt-5\">\n        <Link\n          style={{\"textDecoration\": \"none\"}}\n          to={`/detailVideo/${1}`}\n          className=\"col-xl-8 mt-3 adminLink\"\n        >\n          <div className=\"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center\">\n            <h5 className=\"col-4 m-0\">Operator1</h5>\n            <span className=\"col-2 text-center text-success rounded-3\">{isActive1}</span>\n            <p className=\"col-6 m-0 text-center\">\n              <span className=\"text-warning m-0 text-dark\">\n                <Timer props={time1} />\n              </span>\n            </p>\n          </div>\n        </Link>\n        <Link\n            style={{\"textDecoration\": \"none\"}}\n          to={`/detailVideo/${2}`}\n          className=\"col-xl-8 mt-3 adminLink\"\n        >\n          <div className=\"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center\">\n            <h5 className=\"col-4 m-0\">Operator2</h5>\n            <span className=\"col-2 text-center text-success rounded-3\">{isActive2}</span>\n            <p className=\"col-6 m-0 text-center\">\n              <span className=\"text-warning m-0 text-dark\">\n                <Timer props={time2} />\n              </span>\n            </p>\n          </div>\n        </Link>\n        <Link\n           style={{\"textDecoration\": \"none\"}}\n          to={`/detailVideo/${3}`}\n          className=\"col-xl-8 mt-3 adminLink\"\n        >\n          <div className=\"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center\">\n            <h5 className=\"col-4 m-0\">Operator3</h5>\n            <span className=\"col-2 text-center text-success rounded-3\">{isActive3}</span>\n            <p className=\"col-6 m-0 text-center\">\n              <span className=\"text-warning m-0 text-dark\">\n                <Timer props={time3} />\n              </span>\n            </p>\n          </div>\n        </Link>\n        <Link\n           style={{\"textDecoration\": \"none\"}}\n          to={`/detailVideo/${4}`}\n          className=\"col-xl-8 mt-3 adminLink\"\n        >\n          <div className=\"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center\">\n            <h5 className=\"col-4 m-0\">Operator4</h5>\n            <span className=\"col-2 text-center text-success rounded-3\">{isActive4}</span>\n            <p className=\"col-6 m-0 text-center\">\n              <span className=\"text-warning m-0 text-dark\">\n                <Timer props={time4} />\n              </span>\n            </p>\n          </div>\n        </Link>\n        <Link\n           style={{\"textDecoration\": \"none\"}}\n          to={`/detailVideo/${5}`}\n          className=\"col-xl-8 mt-3 adminLink\"\n        >\n          <div className=\"row mt-3 p-3 d-flex flex-row list-group-item-primary align-self-center shadow-lg rounded-3 align-items-center\">\n            <h5 className=\"col-4 m-0\">Operator5</h5>\n            <span className=\"col-2 text-center text-success rounded-3\">{isActive5}</span>\n            <p className=\"col-6 m-0 text-center\">\n              <span className=\"text-warning m-0 text-dark\">\n                <Timer props={time5} />\n              </span>\n            </p>\n          </div>\n        </Link>\n        </div>\n    )\n}\nexport default AdminPanel;"],"sourceRoot":""}